C51 COMPILER V9.54   MAIN                                                                  06/29/2022 17:50:35 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Software\C51\BIN\C51.EXE main.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\HARDWARE;..\SYSTEM;..\U
                    -SER;..\HARDWARE\key;..\HARDWARE\24C02;..\HARDWARE\LCD12864) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) OBJECT(.\Objec
                    -ts\main.obj)

line level    source

   1          /***************************************************************************
   2          ÊµÑéÃû³Æ£º      IC¿¨¶ÁÐ´ÊµÑé
   3          
   4          ÊµÑéÄ£¿é£º      STC8AºËÐÄ°åv2.1¡¢12864Í¼ÐÎÒº¾§¡¢IC¿¨
   5          
   6          ÊµÑé½ÓÏß£º      P4ÉÏÐèÒª¼ÓÉÏÁ¬½ÓP3.2--INT0ºÍP3.3--INT1µÄÌøÃ±
   7                                      STC8AºËÐÄ°å   ---------   Òº¾§ÏÔÊ¾Çø£¨12864£©
   8                                                                  P2.0      ---------      CS1
   9                                                                  P2.1      ---------      CS2
  10                                                                  P2.2      ---------      RS
  11                                                                  P2.3      ---------      RW
  12                                                                  P2.4      ---------      RE                
  13                                           P0.0~P0.7      ---------      DB0~DB7  
  14                                           
  15                      STC8AºËÐÄ°å  ---------   IC¿¨Çø
  16                                                 P2.6      ---------   SCL
  17                                                 P2.7      ---------   SDA            
  18                                                          
  19          ÏÖÏóÃèÊö£º      ³ÌÐòÔÚÔËÐÐ¹ý³ÌÖÐÊ×ÏÈ¼ì²âÊÇ·ñÓÐÆ÷¼þ´æÔÚ£¬ÈçÓÐÆÚ¼ä´æÔÚÔò¸ù¾ÝÆÁÄ»ÏÔÊ¾°´ÏÂ¶ÔÓ¦°´¼ü¶ÔIC¿¨½øÐÐ¶Á»òÔòÐ
             -´¡£
  20                                  ÈçÎÞÆ÷¼þ£¬ÆÁÄ»»áÌáÊ¾£ºICcard ERROR!£¬ÕâÊ±ºòÇë¼ì²é½ÓÏß£¬ºÍÔªÆ÷¼þÊÇ·ñËðº¦¡£
  21                                  ×¢£º³ÌÐòÖÐÊ¹ÓÃµÄ°´¼üÎªºËÐÄ°åÉÏµÄKEY1£¨Ð´£©¡¢KEY2£¨¶Á£©¡£
  22          
  23          Ê¹ÓÃSTC-ISPÏÂÔØÊ±Çë×¢ÒâÔÚ¡¾Ó²¼þÑ¡Ïî¡¿µÄµÚÒ»Ïî¡¾ÊäÈëÓÃ»§³ÌÐòÔËÐÐÊÇµÄIRCÆµÂÊ¡¿
  24          Èí¼þÄ¬ÈÏÊÇ11.0592MHz    µ«ÎÒÃÇ³ÌÐòÓÃµÄ¶¼ÊÇ24MHz£¬ËùÒÔÎÒÃÇÐèÒªÊÖ¶¯ÊäÈë»òÕßÏÂÀ­Ñ¡Ôñ
  25          24MHzÈ»ºóÔÙµã»÷ÏÂÔØ¼´¿É¡£È»ºó¼´¿É¿´µ½ÓÒÏÂ·½´°¿ÚÌáÊ¾
  26            . ÓÃ»§Éè¶¨ÆµÂÊ: 24.000MHz
  27            . µ÷½ÚºóµÄÆµÂÊ: 24.000MHz
  28            . ÆµÂÊµ÷½ÚÎó²î: 0.000%
  29            
  30          ¸üÐÂÊ±¼ä£º2022-06-08
  31          ***************************************************************************/
  32          
  33          #include <intrins.h>
  34          #include "system.h"
  35          #include "iic.h"
  36          #include "lcd12864.h"
  37          #include "24C02.h"
  38          #include "key.h"
  39          
  40          //ÒªÐ´Èëµ½24c01µÄ×Ö·û´®Êý×é
  41          const uint8_t TEXT_Buffer[]={" Hello world!"};//×Ö·û´®¿ÉÈÎÒâÊäÈë£¬×î´ó²»¿É³¬¹ý127×Ö½ÚÊý¾Ý
  42          #define SIZE sizeof(TEXT_Buffer)
  43          
  44          void main(void)
  45          {
  46   1              uint8_t key = 0;
  47   1              uint8_t datatemp[SIZE];
  48   1              System_Init();                                          //ÏµÍ³³õÊ¼»¯
  49   1              Key_Configure();                                        //°´¼ü³õÊ¼»¯
  50   1              IIC_Hardware_Init();                    //³õÊ¼»¯ÓëIC¿¨Á¬½ÓµÄÓ²¼þ½Ó¿Ú                    
  51   1          LCD12864_Software_Init();           //³õÊ¼»¯12864Òº¾§
  52   1              while(1)
C51 COMPILER V9.54   MAIN                                                                  06/29/2022 17:50:35 PAGE 2   

  53   1              {
  54   2                      while(IC_24Cxx_Check())//¼ì²â²»µ½24c01
  55   2              {
  56   3                  ClearScreen(0);//ÇåÆÁ
  57   3                  Show_Num(2,1,"ICcard ERROR! ");
  58   3                  Show_Num(2,2,"ICcard ERROR! ");
  59   3                  Delay_ms(500);
  60   3                  Show_Num(0,1,"                ");
  61   3                  Show_Num(0,2,"                ");
  62   3                  Delay_ms(500);
  63   3              }        
  64   2              Show_Num(0,0,"K1:Write K2:Read");   //³õÊ¼½çÃæ
  65   2                      //»ñÈ¡É¨Ãè¼üÖµ
  66   2                      key = Key_Scan();
  67   2                      switch(key)
  68   2                      {
  69   3                              case KEY0_NUM:  
  70   3                                      Show_Num(0,1,"Start WriteCard ");
  71   3                                      IC_24Cxx_Write(0,(uint8_t*)TEXT_Buffer,SIZE);
  72   3                                      Show_Num(0,2,"Write Finished!");//ÌáÊ¾´«ËÍÍê³É
  73   3                                      Show_Num(0,3,"                ");//ÏÔÊ¾¶Áµ½µÄ×Ö·û´®
  74   3                                      Delay_ms(500);
  75   3                                      Delay_ms(500);
  76   3                                      break;
  77   3                              case KEY1_NUM:   
  78   3                                      Show_Num(0,1,"Start Read Card ");
  79   3                                      IC_24Cxx_Read(0,datatemp,SIZE);
  80   3                                      Delay_ms(1);
  81   3                                      Show_Num(0,2,"The Data Is:    ");//ÌáÊ¾´«ËÍÍê³É
  82   3                                      Show_Num(0,3,(char*)datatemp);//ÏÔÊ¾¶Áµ½µÄ×Ö·û´®
  83   3                                      Delay_ms(500);
  84   3                                      Delay_ms(500);
  85   3                                      break;
  86   3                              default:        
  87   3                                      break;
  88   3                      }
  89   2                      key=0;
  90   2              }
  91   1      }
  92          
  93          //                                      endfile


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    270    ----
   CONSTANT SIZE    =    116    ----
   XDATA SIZE       =     14      15
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
