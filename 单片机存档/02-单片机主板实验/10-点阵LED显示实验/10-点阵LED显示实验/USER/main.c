/***************************************************************************
实验名称：点阵LED显示实验

实验模块：	STC8A核心板-V2.1、主板区：矩阵LED

实验接线：		STC8A核心板   ------------   	矩阵LED           
						P0.0~P0.7     ------------    1~8 (J16)
						P2.0~P2.7     ------------    9~16(J17)
						P1.0~P1.7     ------------    A~H (J14)
						P3.0~P3.7     ------------    I~P (J15)
						
现象描述：  矩阵LED循环显示“单片机实训装置”

更新时间：2022.06.07
***************************************************************************/
#include "intrins.h"
#include "system.h"
#include "led.h"

uint16_t code Tab[][32]={

0xF7,0xF7,0xEF,0xFB,0xDF,0xFD,0x03,0xE0,0x7B,0xEF,0x7B,0xEF,0x03,0xE0,0x7B,0xEF,
0x7B,0xEF,0x03,0xE0,0x7F,0xFF,0x7F,0xFF,0x00,0x80,0x7F,0xFF,0x7F,0xFF,0x7F,0xFF,/*"单",0*/

0xFF,0xFD,0xF7,0xFD,0xF7,0xFD,0xF7,0xFD,0xF7,0xFD,0x07,0xC0,0xF7,0xFF,0xF7,0xFF,
0xF7,0xFF,0x07,0xF8,0xF7,0xFB,0xF7,0xFB,0xF7,0xFB,0xFB,0xFB,0xFB,0xFB,0xFD,0xFB,/*"片",1*/

0xF7,0xFF,0x77,0xF0,0x77,0xF7,0x77,0xF7,0x40,0xF7,0x77,0xF7,0x73,0xF7,0x63,0xF7,
0x55,0xF7,0x55,0xF7,0x76,0xF7,0x77,0xB7,0x77,0xB7,0xB7,0xB7,0xB7,0x8F,0xD7,0xFF,/*"机",2*/

0xBF,0xFF,0x7F,0xFF,0x01,0x80,0xFD,0xBF,0xEE,0xDE,0xDF,0xFE,0xDF,0xFE,0xF7,0xFE,
0xEF,0xFE,0xEF,0xFE,0x00,0x80,0x7F,0xFD,0xBF,0xFB,0xDF,0xF7,0xE7,0xEF,0xF9,0xDF,/*"实",3*/

0x7F,0xDF,0x7B,0xDB,0x77,0xDB,0x77,0xDB,0x7F,0xDB,0x7F,0xDB,0x70,0xDB,0x77,0xDB,
0x77,0xDB,0x77,0xDB,0x77,0xDB,0x57,0xDB,0x67,0xDB,0xB7,0xDB,0xBF,0xDF,0xDF,0xDF,/*"训",4*/

0xEF,0xFB,0xED,0xFB,0x2B,0x80,0xEF,0xFB,0xE7,0xFB,0xEB,0xFB,0x6C,0xC0,0xAF,0xFF,
0x7F,0xFF,0x00,0x80,0x5F,0xFF,0xCF,0xEE,0xD3,0xF5,0x5C,0xF3,0x9F,0x8F,0xDF,0xFF,/*"装",5*/

0x01,0xC0,0xDD,0xDD,0x01,0xC0,0x7F,0xFF,0x01,0xC0,0x7F,0xFF,0x07,0xF0,0xF7,0xF7,
0x07,0xF0,0xF7,0xF7,0x07,0xF0,0xF7,0xF7,0x07,0xF0,0xF7,0xF7,0x00,0x80,0xFF,0xFF,/*"置",6*/

}	;

void main(void)
{
	uint8_t i,j,a,b;
	uint16_t k;
	System_Init();			 //系统初始化
	LED_Init();
	
	while(1)
	{
	  for(i = 0;i < 7;i++)			 	//显示7个字（单片机实训装置）
		{
			for(k = 0;k < 100;k++)		   	//每一个字扫描显示100次
			{
				P1 = 0;					  	//设置初始值
				P3 = 0;
				a = 1;
				b = 1;
				for(j = 0;j < 16;j++)	   	//扫描16行点阵
				{
					P0 = Tab[i][j*2];		//扫描每一行的前八位
					P2 = Tab[i][j*2+1];		//扫描每一行的后八位
					
					if(j < 8)				//前八行设置哪一行显示
					{
						P1 = P1|a;			//当前显示的那一行置高
						Delay_ms(1);
						P1 = P1&0;
						a *= 2;
					}
					else					//后八行设置哪一行显示
					{
						P3 = P1|b;			//当前显示的那一行置高
						Delay_ms(1);
						P3 = P3&0;
						b *= 2;	
					}
				}				
			}
		}
	}
}

//                                      endfile
